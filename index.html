<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Jogo de Aprendizado de Ingl√™s</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 1000px;
            margin: 0 auto;
            background: white;
            border-radius: 20px;
            box-shadow: 0 20px 40px rgba(0,0,0,0.1);
            overflow: hidden;
        }

        .header {
            background: linear-gradient(135deg, #4CAF50, #45a049);
            color: white;
            padding: 30px;
            text-align: center;
        }

        .header h1 {
            font-size: 2.5rem;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
        }

        .tabs {
            display: flex;
            background: #f5f5f5;
            border-bottom: 1px solid #ddd;
        }

        .tab {
            flex: 1;
            padding: 15px;
            background: none;
            border: none;
            cursor: pointer;
            font-size: 1.1rem;
            font-weight: 600;
            transition: all 0.3s ease;
            color: #666;
        }

        .tab.active {
            background: white;
            color: #4CAF50;
            border-bottom: 3px solid #4CAF50;
        }

        .tab:hover:not(.active) {
            background: #e8e8e8;
        }

        .content {
            padding: 30px;
        }

        .tab-content {
            display: none;
        }

        .tab-content.active {
            display: block;
        }

        .controls {
            display: flex;
            gap: 15px;
            margin-bottom: 30px;
            flex-wrap: wrap;
            align-items: center;
        }

        .voice-control {
            display: flex;
            align-items: center;
            gap: 10px;
            background: #f8f9fa;
            padding: 12px 20px;
            border-radius: 25px;
            border: 2px solid #e9ecef;
        }

        .voice-control input[type="checkbox"] {
            width: 20px;
            height: 20px;
            accent-color: #4CAF50;
        }

        .btn {
            background: linear-gradient(135deg, #4CAF50, #45a049);
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 25px;
            cursor: pointer;
            font-size: 1rem;
            font-weight: 600;
            transition: all 0.3s ease;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(76, 175, 80, 0.4);
        }

        .btn:active {
            transform: translateY(0);
        }

        .btn:disabled {
            background: #ccc;
            cursor: not-allowed;
            transform: none;
            box-shadow: none;
        }

        .btn-secondary {
            background: linear-gradient(135deg, #2196F3, #1976D2);
        }

        .btn-secondary:hover {
            box-shadow: 0 5px 15px rgba(33, 150, 243, 0.4);
        }

        .btn-danger {
            background: linear-gradient(135deg, #f44336, #d32f2f);
        }

        .btn-danger:hover {
            box-shadow: 0 5px 15px rgba(244, 67, 54, 0.4);
        }

        .game-status {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }

        .status-card {
            background: white;
            padding: 20px;
            border-radius: 15px;
            text-align: center;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            border-left: 5px solid #4CAF50;
        }

        .status-card h3 {
            color: #333;
            margin-bottom: 10px;
            font-size: 1rem;
        }

        .status-value {
            font-size: 1.8rem;
            font-weight: bold;
            color: #4CAF50;
        }

        .game-area {
            background: #f8f9fa;
            padding: 30px;
            border-radius: 15px;
            margin-bottom: 30px;
            min-height: 400px;
        }

        .question {
            font-size: 1.4rem;
            color: #333;
            margin-bottom: 20px;
            text-align: center;
            line-height: 1.6;
        }

        .english-phrase {
            font-size: 1.8rem;
            font-weight: bold;
            color: #2196F3;
            margin: 20px 0;
            padding: 20px;
            background: white;
            border-radius: 10px;
            border-left: 5px solid #2196F3;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            text-align: center;
        }

        .answer-area {
            margin: 30px 0;
        }

        .answer-area h4 {
            color: #333;
            margin-bottom: 15px;
            text-align: center;
        }

        .selected-words {
            min-height: 80px;
            background: white;
            border: 3px dashed #ddd;
            border-radius: 15px;
            padding: 20px;
            margin-bottom: 20px;
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            align-items: center;
            justify-content: center;
            transition: border-color 0.3s ease;
        }

        .selected-words.has-words {
            border-color: #4CAF50;
            border-style: solid;
        }

        .selected-words.empty {
            align-items: center;
            justify-content: center;
            color: #999;
            font-style: italic;
        }

        .word-buttons {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            justify-content: center;
            margin-bottom: 20px;
        }

        .word-btn {
            background: linear-gradient(135deg, #FF9800, #F57C00);
            color: white;
            border: none;
            padding: 12px 20px;
            border-radius: 25px;
            cursor: pointer;
            font-size: 1rem;
            font-weight: 600;
            transition: all 0.3s ease;
            min-width: 80px;
        }

        .word-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(255, 152, 0, 0.4);
        }

        .word-btn:disabled {
            background: #ccc;
            cursor: not-allowed;
            transform: none;
            box-shadow: none;
        }

        .selected-word {
            background: linear-gradient(135deg, #4CAF50, #45a049);
            color: white;
            border: none;
            padding: 10px 18px;
            border-radius: 20px;
            cursor: pointer;
            font-size: 1rem;
            font-weight: 600;
            transition: all 0.3s ease;
        }

        .selected-word:hover {
            background: linear-gradient(135deg, #f44336, #d32f2f);
            transform: translateY(-1px);
        }

        .game-actions {
            display: flex;
            gap: 15px;
            justify-content: center;
            flex-wrap: wrap;
        }

        .phrases-list {
            max-height: 400px;
            overflow-y: auto;
            background: #f8f9fa;
            border-radius: 15px;
            padding: 20px;
        }

        .phrase-item {
            background: white;
            padding: 20px;
            margin-bottom: 15px;
            border-radius: 10px;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
            display: flex;
            justify-content: space-between;
            align-items: center;
            flex-wrap: wrap;
            gap: 15px;
        }

        .phrase-content {
            flex: 1;
            min-width: 250px;
        }

        .phrase-english {
            font-weight: bold;
            color: #2196F3;
            font-size: 1.1rem;
            margin-bottom: 5px;
        }

        .phrase-portuguese {
            color: #666;
        }

        .phrase-actions {
            display: flex;
            gap: 10px;
        }

        .btn-small {
            padding: 8px 16px;
            font-size: 0.9rem;
        }

        .form-group {
            margin-bottom: 20px;
        }

        .form-group label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
            color: #333;
        }

        .form-group input, .form-group textarea {
            width: 100%;
            padding: 12px;
            border: 2px solid #ddd;
            border-radius: 10px;
            font-size: 1rem;
        }

        .form-group input:focus, .form-group textarea:focus {
            outline: none;
            border-color: #4CAF50;
        }

        .modal {
            display: none;
            position: fixed;
            z-index: 1000;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0,0,0,0.5);
        }

        .modal-content {
            background-color: white;
            margin: 5% auto;
            padding: 30px;
            border-radius: 20px;
            width: 90%;
            max-width: 500px;
            position: relative;
            animation: modalSlideIn 0.3s ease;
        }

        @keyframes modalSlideIn {
            from {
                opacity: 0;
                transform: translateY(-50px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .close {
            position: absolute;
            right: 20px;
            top: 20px;
            font-size: 28px;
            font-weight: bold;
            cursor: pointer;
            color: #999;
        }

        .close:hover {
            color: #333;
        }

        .feedback {
            padding: 20px;
            border-radius: 15px;
            margin: 20px 0;
            text-align: center;
            font-weight: bold;
            font-size: 1.2rem;
            display: none;
            animation: feedbackSlideIn 0.3s ease;
        }

        @keyframes feedbackSlideIn {
            from {
                opacity: 0;
                transform: translateY(-20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .feedback.correct {
            background: #d4edda;
            color: #155724;
            border: 2px solid #c3e6cb;
        }

        .feedback.incorrect {
            background: #f8d7da;
            color: #721c24;
            border: 2px solid #f5c6cb;
        }

        .game-complete {
            text-align: center;
            padding: 40px;
            background: linear-gradient(135deg, #4CAF50, #45a049);
            color: white;
            border-radius: 15px;
            margin: 20px 0;
        }

        .game-complete h2 {
            font-size: 2.5rem;
            margin-bottom: 20px;
        }

        .game-complete p {
            font-size: 1.3rem;
            margin-bottom: 30px;
        }

        @media (max-width: 768px) {
            .container {
                margin: 10px;
                border-radius: 15px;
            }

            .header {
                padding: 20px;
            }

            .header h1 {
                font-size: 2rem;
            }

            .content {
                padding: 20px;
            }

            .controls {
                flex-direction: column;
                align-items: stretch;
            }

            .voice-control {
                justify-content: center;
            }

            .phrase-item {
                flex-direction: column;
                align-items: stretch;
            }

            .phrase-actions {
                justify-content: center;
            }

            .tabs {
                flex-direction: column;
            }

            .modal-content {
                margin: 10% auto;
                width: 95%;
                padding: 20px;
            }

            .game-status {
                grid-template-columns: repeat(2, 1fr);
            }

            .word-btn, .selected-word {
                font-size: 0.9rem;
                padding: 10px 15px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>üéì English Learning Game</h1>
            <p>Monte as frases na ordem correta!</p>
        </div>

        <div class="tabs">
            <button class="tab active" data-tab="game">Jogar</button>
            <button class="tab" data-tab="manage">Gerenciar Frases</button>
        </div>

        <div class="content">
            <!-- Game Tab -->
            <div id="game" class="tab-content active">
                <div class="controls">
                    <div class="voice-control">
                        <input type="checkbox" id="enableVoice" checked>
                        <label for="enableVoice">üîä Falar</label>
                    </div>
                    <button class="btn" onclick="startGame()">Novo Jogo</button>
                    <button class="btn btn-secondary" onclick="resetRound()" id="resetBtn" style="display: none;">üîÑ Resetar</button>
                </div>

                <div class="game-status">
                    <div class="status-card">
                        <h3>Pontua√ß√£o</h3>
                        <div class="status-value">
                            <span id="currentScore">0</span> / <span id="totalQuestions">0</span>
                        </div>
                    </div>
                    <div class="status-card">
                        <h3>Pergunta</h3>
                        <div class="status-value">
                            <span id="currentQuestionNum">0</span> / <span id="totalPhrases">0</span>
                        </div>
                    </div>
                    <div class="status-card">
                        <h3>Restantes</h3>
                        <div class="status-value" id="remainingQuestions">0</div>
                    </div>
                </div>

                <div class="game-area">
                    <div id="gameContent">
                        <div style="text-align: center; padding: 40px;">
                            <h2>üéÆ Clique em "Novo Jogo" para come√ßar!</h2>
                            <p>Monte as palavras na ordem correta para formar a tradu√ß√£o em portugu√™s.</p>
                        </div>
                    </div>
                </div>

                <div class="feedback" id="feedback"></div>
            </div>

            <!-- Manage Tab -->
            <div id="manage" class="tab-content">
                <div class="controls">
                    <button class="btn" onclick="openAddModal()">‚ûï Adicionar Frase</button>
                    <button class="btn btn-danger" onclick="clearAllPhrases()">üóëÔ∏è Limpar Tudo</button>
                </div>

                <div class="phrases-list" id="phrasesList">
                    <!-- Phrases will be loaded here -->
                </div>
            </div>
        </div>
    </div>

    <!-- Add/Edit Modal -->
    <div id="phraseModal" class="modal">
        <div class="modal-content">
            <span class="close" onclick="closeModal()">&times;</span>
            <h2 id="modalTitle">Adicionar Nova Frase</h2>
            <form id="phraseForm">
                <div class="form-group">
                    <label for="englishPhrase">Frase em Ingl√™s:</label>
                    <input type="text" id="englishPhrase" required>
                </div>
                <div class="form-group">
                    <label for="portugueseTranslation">Tradu√ß√£o em Portugu√™s:</label>
                    <input type="text" id="portugueseTranslation" required>
                </div>
                <div class="controls">
                    <button type="submit" class="btn">Salvar</button>
                    <button type="button" class="btn btn-secondary" onclick="closeModal()">Cancelar</button>
                </div>
            </form>
        </div>
    </div>

    <script>
        let phrases = [
            {
                id: 1,
                english: "I am a man, not a child.",
                portuguese: "Eu sou um homem, n√£o uma crian√ßa."
            },
            {
                id: 2,
                english: "The weather is beautiful today.",
                portuguese: "O tempo est√° lindo hoje."
            },
            {
                id: 3,
                english: "I love learning new languages.",
                portuguese: "Eu amo aprender novos idiomas."
            },
            {
                id: 4,
                english: "What time is it?",
                portuguese: "Que horas s√£o?"
            },
            {
                id: 5,
                english: "Can you help me, please?",
                portuguese: "Voc√™ pode me ajudar, por favor?"
            },
            {
                id: 6,
                english: "This book is very interesting.",
                portuguese: "Este livro √© muito interessante."
            },
            {
                id: 7,
                english: "Where do you live?",
                portuguese: "Onde voc√™ mora?"
            },
            {
                id: 8,
                english: "I need to buy some food.",
                portuguese: "Eu preciso comprar um pouco de comida."
            }
        ];

        let gameState = {
            availableQuestions: [],
            currentQuestion: null,
            selectedWords: [],
            score: 0,
            totalQuestions: 0,
            currentQuestionNum: 0,
            gameActive: false
        };

        let editingId = null;

        // Tab functionality
        document.querySelectorAll('.tab').forEach(tab => {
            tab.addEventListener('click', () => {
                const targetTab = tab.dataset.tab;
                
                document.querySelectorAll('.tab').forEach(t => t.classList.remove('active'));
                document.querySelectorAll('.tab-content').forEach(c => c.classList.remove('active'));
                
                tab.classList.add('active');
                document.getElementById(targetTab).classList.add('active');
                
                if (targetTab === 'manage') {
                    loadPhrasesList();
                }
            });
        });

        // Speech synthesis functions
        function speak(text, lang) {
            if (!document.getElementById('enableVoice').checked) return;
            
            const utterance = new SpeechSynthesisUtterance(text);
            utterance.lang = lang === 'pt' ? 'pt-BR' : 'en-US';
            utterance.rate = 0.8;
            speechSynthesis.speak(utterance);
        }

        // Utility functions
        function shuffleArray(array) {
            const shuffled = [...array];
            for (let i = shuffled.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [shuffled[i], shuffled[j]] = [shuffled[j], shuffled[i]];
            }
            return shuffled;
        }

        function updateGameStatus() {
            document.getElementById('currentScore').textContent = gameState.score;
            document.getElementById('totalQuestions').textContent = gameState.totalQuestions;
            document.getElementById('currentQuestionNum').textContent = gameState.currentQuestionNum;
            document.getElementById('totalPhrases').textContent = phrases.length;
            document.getElementById('remainingQuestions').textContent = gameState.availableQuestions.length;
        }

        // Game functions
        function startGame() {
            if (phrases.length === 0) {
                alert('Adicione algumas frases primeiro na aba "Gerenciar Frases"');
                return;
            }
            
            gameState = {
                availableQuestions: [...phrases],
                currentQuestion: null,
                selectedWords: [],
                score: 0,
                totalQuestions: 0,
                currentQuestionNum: 0,
                gameActive: true
            };
            
            updateGameStatus();
            nextQuestion();
        }

        function nextQuestion() {
            if (gameState.availableQuestions.length === 0) {
                endGame();
                return;
            }
            
            // Get random question from available questions
            const randomIndex = Math.floor(Math.random() * gameState.availableQuestions.length);
            gameState.currentQuestion = gameState.availableQuestions[randomIndex];
            gameState.availableQuestions.splice(randomIndex, 1);
            
            gameState.totalQuestions++;
            gameState.currentQuestionNum++;
            gameState.selectedWords = [];
            
            updateGameStatus();
            renderQuestion();
            hideFeedback();
            
            // Show reset button
            document.getElementById('resetBtn').style.display = 'inline-block';
        }

        function renderQuestion() {
            const words = gameState.currentQuestion.portuguese.split(' ');
            const shuffledWords = shuffleArray(words);
            
            const gameContent = document.getElementById('gameContent');
            gameContent.innerHTML = `
                <div class="question">Qual o significado de:</div>
                <div class="english-phrase">"${gameState.currentQuestion.english}"</div>
                
                <div class="answer-area">
                    <h4>üéØ Monte a tradu√ß√£o na ordem correta:</h4>
                    <div class="selected-words empty" id="selectedWordsArea">
                        Clique nas palavras abaixo para formar a frase
                    </div>
                    
                    <div class="word-buttons" id="wordButtons">
                        ${shuffledWords.map((word, index) => `
                            <button class="word-btn" onclick="selectWord('${word}', ${index})" id="word-${index}">
                                ${word}
                            </button>
                        `).join('')}
                    </div>
                    
                    <div class="game-actions">
                        <button class="btn" onclick="checkAnswer()" id="checkBtn">‚úÖ Verificar Resposta</button>
                        <button class="btn btn-secondary" onclick="showAnswer()">üëÅÔ∏è Ver Resposta</button>
                        <button class="btn btn-secondary" onclick="clearSelection()">üóëÔ∏è Limpar</button>
                    </div>
                </div>
            `;
            
            // Speak the question
            setTimeout(() => {
                speak("Qual o significado de", 'pt');
                setTimeout(() => {
                    speak(gameState.currentQuestion.english, 'en');
                }, 1500);
            }, 500);
        }

        function selectWord(word, buttonIndex) {
            const button = document.getElementById(`word-${buttonIndex}`);
            if (button.disabled) return;
            
            gameState.selectedWords.push(word);
            button.disabled = true;
            
            updateSelectedWordsDisplay();
        }

        function removeSelectedWord(wordIndex) {
            const word = gameState.selectedWords[wordIndex];
            gameState.selectedWords.splice(wordIndex, 1);
            
            // Re-enable the button
            const buttons = document.querySelectorAll('.word-btn');
            buttons.forEach(btn => {
                if (btn.textContent.trim() === word && btn.disabled) {
                    btn.disabled = false;
                    return;
                }
            });
            
            updateSelectedWordsDisplay();
        }

        function updateSelectedWordsDisplay() {
            const selectedWordsArea = document.getElementById('selectedWordsArea');
            
            if (gameState.selectedWords.length === 0) {
                selectedWordsArea.innerHTML = 'Clique nas palavras abaixo para formar a frase';
                selectedWordsArea.className = 'selected-words empty';
            } else {
                selectedWordsArea.innerHTML = gameState.selectedWords.map((word, index) => 
                    `<button class="selected-word" onclick="removeSelectedWord(${index})">${word}</button>`
                ).join('');
                selectedWordsArea.className = 'selected-words has-words';
            }
        }

        function clearSelection() {
            gameState.selectedWords = [];
            
            // Re-enable all buttons
            const buttons = document.querySelectorAll('.word-btn');
            buttons.forEach(btn => btn.disabled = false);
            
            updateSelectedWordsDisplay();
        }

        function checkAnswer() {
            if (gameState.selectedWords.length === 0) {
                alert('Selecione algumas palavras primeiro!');
                return;
            }
            
            const userAnswer = gameState.selectedWords.join(' ').toLowerCase().trim();
            const correctAnswer = gameState.currentQuestion.portuguese.toLowerCase().trim();
            
            const isCorrect = userAnswer === correctAnswer;
            
            if (isCorrect) {
                gameState.score++;
                showFeedback('üéâ Perfeito! Voc√™ acertou!', 'correct');
                speak('Perfeito! Voc√™ acertou!', 'pt');
                
                // Disable all buttons
                const buttons = document.querySelectorAll('.word-btn');
                buttons.forEach(btn => btn.disabled = true);
                
                // Auto proceed to next question after 2 seconds
                setTimeout(() => {
                    if (gameState.availableQuestions.length > 0) {
                        nextQuestion();
                    } else {
                        endGame();
                    }
                }, 2000);
                
            } else {
                showFeedback(`‚ùå Incorreto! A resposta correta √©: "${gameState.currentQuestion.portuguese}"`, 'incorrect');
                speak('Incorreto. A resposta correta √©:', 'pt');
                setTimeout(() => {
                    speak(gameState.currentQuestion.portuguese, 'pt');
                }, 1500);
            }
            
            updateGameStatus();
        }

        function showAnswer() {
            showFeedback(`üí° A resposta √©: "${gameState.currentQuestion.portuguese}"`, 'correct');
            speak('A resposta √©:', 'pt');
            setTimeout(() => {
                speak(gameState.currentQuestion.portuguese, 'pt');
            }, 1000);
            
            // Show correct order
            gameState.selectedWords = gameState.currentQuestion.portuguese.split(' ');
            updateSelectedWordsDisplay();
            
            // Disable all word buttons
            const buttons = document.querySelectorAll('.word-btn');
            buttons.forEach(btn => btn.disabled = true);
        }

        function resetRound() {
            gameState.selectedWords = [];
            updateSelectedWordsDisplay();
            
            // Re-enable all buttons
            const buttons = document.querySelectorAll('.word-btn');
            buttons.forEach(btn => btn.disabled = false);
            
            hideFeedback();
        }

        function endGame() {
            const percentage = Math.round((gameState.score / gameState.totalQuestions) * 100);
            const gameContent = document.getElementById('gameContent');
            
            let message = '';
            if (percentage >= 90) {
                message = 'üèÜ Excelente! Voc√™ √© um mestre!';
            } else if (percentage >= 70) {
                message = 'üéâ Muito bem! Continue assim!';
            } else if (percentage >= 50) {
                message = 'üëç Bom trabalho! Pratique mais!';
            } else {
                message = 'üí™ Continue tentando! A pr√°tica leva √† perfei√ß√£o!';
            }
            
            gameContent.innerHTML = `
                <div class="game-complete">
                    <h2>üéÆ Jogo Conclu√≠do!</h2>
                    <p>${message}</p>
                    <div style="font-size: 3rem; margin: 20px 0;">
                        ${gameState.score}/${gameState.totalQuestions}
                    </div>
                    <p style="font-size: 1.5rem; margin-bottom: 30px;">
                        ${percentage}% de acertos
                    </p>
                    <button class="btn" onclick="startGame()" style="font-size: 1.2rem; padding: 15px 30px;">
                        üîÑ Jogar Novamente
                    </button>
                </div>
            `;
            
            document.getElementById('resetBtn').style.display = 'none';
            gameState.gameActive = false;
            
            speak(`Jogo conclu√≠do! Voc√™ acertou ${gameState.score} de ${gameState.totalQuestions} perguntas.`, 'pt');
        }

        function showFeedback(message, type) {
            const feedback = document.getElementById('feedback');
            feedback.textContent = message;
            feedback.className = `feedback ${type}`;
            feedback.style.display = 'block';
        }

        function hideFeedback() {
            document.getElementById('feedback').style.display = 'none';
        }

        // Phrase management functions
        function loadPhrasesList() {
            const list = document.getElementById('phrasesList');
            
            if (phrases.length === 0) {
                list.innerHTML = '<p style="text-align: center; color: #666; padding: 40px;">Nenhuma frase cadastrada. Adicione sua primeira frase!</p>';
                return;
            }
            
            list.innerHTML = phrases.map(phrase => `
                <div class="phrase-item">
                    <div class="phrase-content">
                        <div class="phrase-english">${phrase.english}</div>
                        <div class="phrase-portuguese">${phrase.portuguese}</div>
                    </div>
                    <div class="phrase-actions">
                        <button class="btn btn-secondary btn-small" onclick="editPhrase(${phrase.id})">‚úèÔ∏è Editar</button>
                        <button class="btn btn-danger btn-small" onclick="deletePhrase(${phrase.id})">üóëÔ∏è Excluir</button>
                    </div>
                </div>
            `).join('');
        }

        function openAddModal() {
            editingId = null;
            document.getElementById('modalTitle').textContent = 'Adicionar Nova Frase';
            document.getElementById('englishPhrase').value = '';
            document.getElementById('portugueseTranslation').value = '';
            document.getElementById('phraseModal').style.display = 'block';
        }

        function editPhrase(id) {
            const phrase = phrases.find(p => p.id === id);
            if (!phrase) return;
            
            editingId = id;
            document.getElementById('modalTitle').textContent = 'Editar Frase';
            document.getElementById('englishPhrase').value = phrase.english;
            document.getElementById('portugueseTranslation').value = phrase.portuguese;
            document.getElementById('phraseModal').style.display = 'block';
        }

        function deletePhrase(id) {
            if (confirm('Tem certeza que deseja excluir esta frase?')) {
                phrases = phrases.filter(p => p.id !== id);
                loadPhrasesList();
            }
        }

        function clearAllPhrases() {
            if (confirm('Tem certeza que deseja excluir todas as frases? Esta a√ß√£o n√£o pode ser desfeita.')) {
                phrases = [];
                loadPhrasesList();
            }
        }

        function closeModal() {
            document.getElementById('phraseModal').style.display = 'none';
        }

        // Form submission
        document.getElementById('phraseForm').addEventListener('submit', function(e) {
            e.preventDefault();
            
            const englishPhrase = document.getElementById('englishPhrase').value.trim();
            const portugueseTranslation = document.getElementById('portugueseTranslation').value.trim();
            
            if (!englishPhrase || !portugueseTranslation) {
                alert('Por favor, preencha todos os campos.');
                return;
            }
            
            if (editingId) {
                // Edit existing phrase
                const phrase = phrases.find(p => p.id === editingId);
                if (phrase) {
                    phrase.english = englishPhrase;
                    phrase.portuguese = portugueseTranslation;
                }
            } else {
                // Add new phrase
                const newId = Math.max(...phrases.map(p => p.id), 0) + 1;
                phrases.push({
                    id: newId,
                    english: englishPhrase,
                    portuguese: portugueseTranslation
                });
            }
            
            closeModal();
            loadPhrasesList();
        });

        // Close modal when clicking outside
        window.addEventListener('click', function(e) {
            const modal = document.getElementById('phraseModal');
            if (e.target === modal) {
                closeModal();
            }
        });

        // Initialize
        loadPhrasesList();
        updateGameStatus();
    </script>
</body>
</html>